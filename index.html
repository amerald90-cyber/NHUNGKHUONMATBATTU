<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dự Án Những Gương Mặt Bất Tử - Hành Trình Số</title>
    
    <!-- CHỐNG CACHE -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/263/263062.png" type="image/png">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden; 
            background-color: #240046; 
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
            display: block;
        }

        /* NÚT ĐIỀU KHIỂN NHẠC */
        #music-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
            width: 55px;
            height: 55px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        #music-icon {
            width: 28px;
            height: 28px;
            filter: invert(1);
        }

        /* Hiệu ứng sóng nhạc khi đang phát */
        .is-playing {
            animation: pulse-ring 1.5s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
            background: rgba(255, 255, 255, 0.4) !important;
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }
    </style>
</head>
<body>

    <!-- NÚT LOA -->
    <div id="music-btn" onclick="toggleMusic()">
        <img id="music-icon" src="https://cdn-icons-png.flaticon.com/512/727/727269.png" alt="Play/Pause">
    </div>

    <!-- NHẠC NỀN TỪ GOOGLE DRIVE -->
    <audio id="bgMusic" loop>
        <source src="https://docs.google.com/uc?export=download&id=1BiuyiKZIjREMzlH13BQHwsQB2V81gTku" type="audio/mpeg">
    </audio>

    <script>
        var audio = document.getElementById('bgMusic');
        var btn = document.getElementById('music-btn');
        var icon = document.getElementById('music-icon');

        // Hình ảnh icon
        var iconPlay = "https://cdn-icons-png.flaticon.com/512/727/727269.png"; // Icon đang phát (Loa)
        var iconPause = "https://cdn-icons-png.flaticon.com/512/3103/3103443.png"; // Icon dừng (Mute)

        function toggleMusic() {
            if (audio.paused) {
                playMusic();
            } else {
                pauseMusic();
            }
        }

        function playMusic() {
            audio.play().catch(function(error) {
                console.log("Trình duyệt chặn tự động phát, chờ tương tác người dùng.");
            });
            btn.classList.add('is-playing');
            icon.src = iconPlay;
        }

        function pauseMusic() {
            audio.pause();
            btn.classList.remove('is-playing');
            icon.src = iconPause;
        }

        // TỰ ĐỘNG PHÁT KHI CÓ TƯƠNG TÁC ĐẦU TIÊN (Để lách luật trình duyệt)
        function autoPlayOnFirstInteraction() {
            playMusic();
            // Sau khi phát lần đầu, gỡ bỏ các sự kiện này để không bị lặp lại
            document.removeEventListener('click', autoPlayOnFirstInteraction);
            document.removeEventListener('touchstart', autoPlayOnFirstInteraction);
            document.removeEventListener('scroll', autoPlayOnFirstInteraction);
        }

        document.addEventListener('click', autoPlayOnFirstInteraction);
        document.addEventListener('touchstart', autoPlayOnFirstInteraction);
        document.addEventListener('scroll', autoPlayOnFirstInteraction);
    </script>

    <!-- NỘI DUNG CHÍNH (IFRAME) -->
    <iframe 
        src="https://script.google.com/macros/s/AKfycbwsiZW2nFBAILkM_uZfYgBFEr1Hq_KEgOo3XQ1SGBtvmGKUsLKmMiLWLak8107Cj2bD/exec?ver=update_new" 
        title="Những Gương Mặt Bất Tử"
        allow="camera; microphone; autoplay; clipboard-write; encrypted-media; picture-in-picture" 
        allowfullscreen>
    </iframe>

</body>
</html>